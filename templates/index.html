<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Daily lunch menus from three restaurants downstairs: FG by ISS, FoodHub by Sodexo, and Keila Cafe by Compass Group">
    <title>DOWNSTAIRS TODAY - Daily Lunch Menus</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <!-- Skip to main content link for keyboard navigation -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <header class="header-container">
        <h1>DOWNSTAIRS TODAY</h1>
        <div class="date-info" role="banner" aria-label="Current date and day">
            <time datetime="{{ current_date }}">
                <span class="weekday">{{ current_weekday }}</span>,
                <span class="date">{{ current_date }}</span>
            </time>
        </div>
    </header>
    
    <div class="separator" role="presentation" aria-hidden="true"></div>
    
    <main id="main-content" class="container" role="main" aria-label="Restaurant lunch menus">
        {% for menu, name in zip(menus, restaurant_names) %}
            <section class="menu {% if 'ISS' in name %}iss-theme{% elif 'Sodexo' in name %}sodexo-theme{% elif 'Compass Group' in name %}compass-theme{% endif %}" role="region" aria-labelledby="restaurant-{{ loop.index }}" data-restaurant="{{ name }}">
                <div class="logo-text-container">
                    <div class="logo-container">
                        {% if 'ISS' in name %}
                            <img src="{{ url_for('static', filename='isslogo.png') }}" alt="ISS company logo" class="logo" role="img" aria-describedby="restaurant-{{ loop.index }}">
                        {% elif 'Sodexo' in name %}
                            <img src="{{ url_for('static', filename='sodexologo.png') }}" alt="Sodexo company logo" class="logo" role="img" aria-describedby="restaurant-{{ loop.index }}">
                        {% elif 'Compass Group' in name %}
                            <img src="{{ url_for('static', filename='compassgrouplogo.png') }}" alt="Compass Group company logo" class="logo" role="img" aria-describedby="restaurant-{{ loop.index }}">
                        {% endif %}
                    </div>
                    <div class="name-container">
                        <div class="menu-header">
                            <div>
                                <h2 id="restaurant-{{ loop.index }}" class="restaurant-name">{{ name.split(' by ')[0] }}</h2>
                                <p class="company-name">by {{ name.split(' by ')[1] }}</p>
                            </div>
                            <button class="menu-toggle" onclick="toggleMenu('{{ loop.index0 }}')" aria-label="Toggle menu">
                                ‚ñ≤
                            </button>
                        </div>
                    </div>
                </div>
                <div class="meal-list expanded" id="meal-list-{{ loop.index0 }}" role="list" aria-label="Menu items for {{ name }}">
                    {% if menu and menu[0].name != 'Menu temporarily unavailable' %}
                        {% for meal in menu %}
                            <div class="mealrow" role="listitem" data-meal="{{ meal.name }}">
                                <span class="meal-icon">üçΩÔ∏è</span>
                                <div class="meal-content">
                                    <div class="meal-name">{{ meal.name | replace('\n', '<br>') | safe }}</div>
                                    <div class="meal-tags">
                                        <!-- Dietary tags will be added by JavaScript -->
                                    </div>
                                </div>
                                <button class="favorite-btn" onclick="toggleFavorite(this)" aria-label="Add to favorites">
                                    ‚ô°
                                </button>
                            </div>
                            {% if not loop.last %}
                                <div class="meal-separator" role="presentation" aria-hidden="true"></div>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        <div class="no-menu-message" role="listitem">
                            <div class="no-menu-icon">üçΩÔ∏è</div>
                            <div class="no-menu-text">No menu available today</div>
                            <div class="no-menu-subtext">Check back later for today's delicious offerings!</div>
                        </div>
                    {% endif %}
                </div>
            </section>
        {% endfor %}
    </main>
    
    <script src="{{ url_for('static', filename='scripts.js') }}"></script>
</body>
</html>